<div class="content">

    <!-- Start Content-->
    <div class="container-fluid">

        <div class="bdcmb mt-2">
            <div class="row">
                <div class="col-sm-6 col-6">
                    <h4 class="page-title">Ticket Details</h4>
                </div>

                <div class="col-sm-6 col-6">
                    <div class="b-links">
                        <a href="index.html">Home</a> / <a href="ticket-details.html">Ticket Details</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-2">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">

                        <div class="row">
                            <div class="col-sm-2">
                                <img src="assets/images/custom/driving-license.png" class="dl-img">
                            </div>

                            <div class="col-sm-10">

                                <div class="row">
                                   <div class="col-sm-6">
                                        <h4>Ticket# - {{ticketId}}</h4>
                                   </div>

                                   <div class="col-sm-6">
                                        <a *ngIf="!isEditModeOn" class="btn btn-grid btn-primary waves-effect waves-light ticket-edit flt-right" (click)="editTicketDetails()">
                                            <i class="mdi mdi-pencil"></i> Edit
                                        </a>
                                   </div> 
                                </div>

                                <table class="seller-view-tbl">
                                    <tbody><tr>
                                        <td>{{customer?.fullName}}</td>
                                        <td>DL# - {{customer?.driverLicenseNumber}}</td>
                                        <td>License Plate - </td>
                                        <td>Address - {{customer?.streetAddress}}</td>
                                    </tr>

                                    <tr>
                                        <td>License Plate Number - </td>
                                        <td>Dealer Type - None</td>
                                        <td>Created on : <label>{{customer?.createdDate  | date: 'MM/dd/yyyy'}}</label></td>
                                        <td>By <label>Sanket Yoshi</label></td>
                                    </tr>
                                </tbody></table>
                            </div>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="col-sm-4">
                                <h4 class="title-plus-border">Particulars</h4>                                                
                            </div>
                            <div class="col-sm-4">
                                <h4 class="title-plus-border">Status - <span class="color-green">Open</span></h4>                                                
                            </div>
                        </div>

                        <div class="row">
                            <div [ngClass]="{ 'col-sm-9 over-flow-150': isEditModeOn, 'col-sm-12 over-flow-150': !isEditModeOn}">
                                <p-table #dt1 [value]="ticketObj" [paginator]="false" [rows]="10"
                                    [showCurrentPageReport]="false"
                                    [scrollable]="true" 
                                    [scrollHeight]="cheight"
                                    
                                    >
         
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th>Material</th>
                                            <th>Gross(M)</th>
                                            <th>Tare</th>
                                            <th>Net</th>
                                            <th>Price</th>
                                            <th>Amount</th>
                                            <th>Image</th>
                                            <th *ngIf="isEditModeOn">Action</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-ticket>
                                        <tr>
                                            <td>{{ ticket.materialName }}</td>
                                            <td>{{ ticket.gross  }}</td>
                                            <td>{{ ticket.tare }}</td>
                                            <td>{{ ticket.net }}</td>
                                            <td>{{ ticket.price }}</td>
                                            <td>{{ ticket.amount}}</td>
                                            <td>
                                                <img src="{{ticket.imagePath}}" 
                                                class="ticket-particulars-img">
                                            </td>
                                            <td *ngIf="isEditModeOn">
                                                <a data-bs-toggle="modal" data-bs-target="#capture-image" class="btn btn-grid btn-primary waves-effect waves-light"><i class="mdi mdi-pencil"></i> Edit</a> 
                                                
                                                <a class="btn btn-grid btn-danger waves-effect waves-light"><i class="mdi mdi-trash-can-outline"></i> Delete</a>
                                            </td>
                                        </tr>
                                    </ng-template>
                                    
                                    
                                    
                                </p-table>


                                
                            </div>

                            <div class="col-sm-3" *ngIf="isEditModeOn" >
                                <div *ngIf="mainMaterialsVisible" id="mainbox" class="mainbox-row over-flow-150">
                                  <h4 class="materials-heading">Materials</h4>

                                  <ul class="materials-ul materials-ul-1">
                                    
                                    <ng-container  *ngFor="let item of materialList" >
                                        <li>
                                            <a id="showInnerDiv1" class="btn btn-primary btn-materials" (click)="getSubMaterials(item.rowId, item.groupName)">{{item.groupName}}</a>
                                        </li>
                                    </ng-container>
                                  </ul>
                                  
                                </div>

                                <div *ngIf="!mainMaterialsVisible" id="innerdiv1" class="mainbox-row over-flow-150">
                                  <h1 class="btn-materials-2">
                                    <span>
                                        <a id="backToMainBox1" class="btn btn-primary btn-back" (click)="backToMainMaterials()"><i class="mdi mdi-keyboard-backspace"></i></a>
                                    </span>
                                     Main Material - {{selectedMaterial}}
                                </h1>
                     
                                  <ul class="materials-ul">
                                    <ng-container  *ngFor="let item of subMaterialList" >
                                        <li>
                                            <a data-bs-toggle="modal" data-bs-target="#capture-image" class="btn btn-primary btn-materials-inner">{{item.materialName}}</a>
                                        </li>
                                    </ng-container>                                     
                                  </ul>

                                </div>

                            </div>
                        </div>

                        <div class="row mt-1">
                            
                            <div class="col-sm-8">
                                <p class="ticket-details-p"><b>Adjustment : -0.000</b></p>

                                <p class="ticket-details-p"><b>Total LBS</b></p>

                                <table class="ticket-details-tbl">
                                    <thead>
                                        <tr><th>Material</th>
                                        <th>Gross(M)</th>
                                        <th>Tare</th>
                                        <th>Net</th>
                                        <th>Rounding</th>
                                        <th>Amount</th>
                                        <th>Actual Amount</th>
                                    </tr></thead>

                                    <tbody> 
                                        <tr>
                                            <td>{{totalNoOfMaterial}}</td>
                                            <td>{{totalGross}}</td>
                                            <td>{{totalTare}}</td>
                                            <td>{{totalNet}}</td>
                                            <td>---</td>
                                            <td>{{totalAmount}}</td>
                                            <td>---</td>
                                        </tr>                                                     
                                    </tbody>
                                    
                                </table>

                                <div class="row ticket-summary-div">
                                    <div class="col-sm-4">
                                        <b>Paid Amount - 0.000</b>
                                    </div>

                                    <div class="col-sm-4">
                                        <b>Balance Amount - 29.000</b>
                                    </div>

                                    <!-- <div class="col-sm-4 text-right">
                                        <a href="#" class="btn btn-danger">Pay Ticket</a>
                                        <a href="#" class="btn btn-primary">Printout</a>
                                    </div> -->
                                </div>
                            </div>

                            <div *ngIf="!isEditModeOn" class="col-sm-4 pay-print-box">
                                <a href="#" class="btn btn-danger">Pay Ticket</a>
                                <a class="btn btn-primary" (click)="openPDF()">Printout</a>
                            </div>

                            <div *ngIf="isEditModeOn" class="col-sm-4 pay-print-box">
                                <a data-bs-target="#adjustments-modal" data-bs-toggle="modal" href="#" class="btn btn-danger">Adjustments(Deductions)</a>
                                <a class="btn btn-primary" (click)="saveTicketDetails()">Save</a>
                            </div>

                        </div>

                        <!-- <div class="row text-right">
                            <div class="col-sm-12">
                                <a href="#" class="btn btn-danger">Pay Ticket</a>
                                <a href="#" class="btn btn-primary">Printout</a>
                            </div>
                        </div> -->
                    
                    </div> <!-- end card body-->
                </div> <!-- end card -->
            </div><!-- end col-->

        </div>
        <!-- end row-->     
        
    </div> <!-- container -->

</div>