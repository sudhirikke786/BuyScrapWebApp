<!-- ============================================================== -->
<!-- Start Page Content here -->
<!-- ============================================================== -->

<div class="content-page" *ngIf="!showLoader">
  <div class="content">
    <!-- Start Content-->
    <div class="container-fluid">
      <div class="bdcmb mt-2">
        <div class="row">
          <div class="col-sm-6 col-6">
            <h4 class="page-title">Certificates of Destruction</h4>
          </div>

          <div class="col-sm-6 col-6">
            <div class="b-links">
              <a routerLink="/{{orgName}}/home">Home</a> / <a href="javscript:void()" routerLink="/{{orgName}}/certificates">Certificates of Destruction</a>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-6 d-flex">
          <input
            type="text"
            id="example-palaceholder"
            class="form-control"
            placeholder="Search.."
          />
        </div>
        <div class="col-md-6">
          <app-actionbar [actions]="actionList"></app-actionbar>
        </div>
      </div>
      <!-- end page title -->

      <div class="row mt-2">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <p-table
                [value]="certificates"
                [paginator]="true"
                [rows]="10"
                [scrollable]="true" 
                scrollHeight="50vh"
                [showCurrentPageReport]="true"
              
                [tableStyle]="{ 'min-width': '50rem' }"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                [rowsPerPageOptions]="commonService.tableConfig?.pageOptions" 
              >
             
                <ng-template pTemplate="header">
                  <tr>
                    <th></th>
                    <th>Ticket ID</th>
                    <th>Date Created</th>
                    <th>Ticket Amount</th>
                    <th>Seller</th>
                    <th>Date Closed</th>
                    <th>Action</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-certificate>
                  <tr>
                    <td>
                      <!-- <p-tableCheckbox [value]="product" [disabled]="isOutOfStock(product)"></p-tableCheckbox> -->
                      <p-tableCheckbox 
                     
                      [value]="certificate"
                      
                      [disabled]="certificate?.dateClosed"> 
                      
                  </p-tableCheckbox> </td>
                    <td>{{ certificate.rowId }}</td>
                    <td>{{ certificate?.dateOpened | date: 'MM/dd/yyyy' }}</td>
                    <td>{{ certificate?.ticketAmount }}</td>
                    <td>{{ certificate.customerName }}</td>
                    <td>{{ certificate?.dateClosed | date: 'MM/dd/yyyy' }}</td>
                    <td *ngIf="certificate?.dateClosed != null">
					          <a (click)="getCODImagesbyID(certificate)" class="btn btn-grid btn-success waves-effect waves-light"><i class="mdi mdi-eye"></i> Show</a>

                      <a href="javascript:void()" class="btn btn-grid btn-success waves-effect waves-light"><i class="mdi mdi-printer"></i> Print</a>

                      <!-- <a href="" class="btn btn-grid btn-success waves-effect waves-light"><i class="mdi mdi-restore"></i> Restore</a>  -->
                    </td>
                    <td *ngIf="certificate?.dateClosed == null">
                      <a data-bs-target="" data-bs-toggle="modal" class="btn btn-grid btn-danger waves-effect waves-light"><i class="mdi mdi-certificate"></i> COD</a>

                      <!-- <a data-bs-target="" data-bs-toggle="modal" class="btn btn-grid btn-danger waves-effect waves-light"><i class="mdi mdi-close"></i> Close</a> -->
                  </td>
                  </tr>
                </ng-template>
               
              </p-table>
            </div>
            <!-- end card body-->
          </div>
          <!-- end card -->
        </div>
        <!-- end col-->
      </div>
      <!-- end row-->
    </div>
    <!-- container -->
  </div>
  <!-- content -->




</div>



<div class="content" *ngIf="showLoader">

  <app-page-loader type="ftable"></app-page-loader>

  
</div>




<!-- ============================================================== -->
<!-- End Page content -->
<!-- ============================================================== -->

<p-dialog [modal]="true" 
  header="New Regrade"
  [(visible)]="visible"
  [style]="{ width: '60vw' }"
>
  <ng-template pTemplate="header">
    <a (click)="hideCaptureModel()" class="btn btn-primary btn-back"
      ><i class="mdi mdi-keyboard-backspace"></i
    ></a>

    <h5 class="modal-title ml-10" id="myLargeModalLabel">
      Please enter detailed description of material being processed
    </h5>

    <a
      (click)="showCaptureModel()"
      class="btn btn-grid btn-primary waves-effect waves-light ml-10"
    >
      Capture Image</a
    >

    <a (click)="showItemViewModel()" class="btn btn-grid btn-primary waves-effect waves-light ml-10">
      View Item</a
    >
  </ng-template>

  <div class="row">
    <div class="col-md-12">
      <input
        type="text"
        id="example-palaceholder"
        class="form-control"
        value="My COD added in role based data"
      />
    </div>
  </div>

  <div class="row pd-imgs-box mt-3" *ngIf="!certificateLoader">
    <ng-container  *ngFor="let item of certificatesImages">
    <div class="col-sm-3">
      <div class="pd-imgs" tabindex="1">
        <img src="{{item?.codImagePath}}" style="min-height: 150px;" alt="My COD added in role based data" class="img-responsive" />
      </div>
    </div>
  </ng-container>
  
  </div>

  <div class="row pd-imgs-box mt-3" *ngIf="certificateLoader">
   
    <app-page-loader></app-page-loader>
  </div>


  <div class="row mt-3 text-center">
    <div class="col-sm-2">
      <a
        href="#"
        class="btn btn-grid btn-primary waves-effect waves-light btn-display-block"
        >Save</a
      >
    </div>
  </div>
</p-dialog>

<ng-container *ngIf="cvisible">
  <p-dialog [modal]="true" 
  header="New Regrade"
  [(visible)]="cvisible"
  [style]="{ width: '80vw' }"
>
  <ng-template pTemplate="header">
    <a (click)="hideCaptureModel()" class="btn btn-primary btn-back"
      ><i class="mdi mdi-keyboard-backspace"></i
    ></a>

    <h4 class="modal-title ml-10" id="myLargeModalLabel">Capture Image</h4>
  </ng-template>

  <div class="row">
    <app-camera (getPicture)="handleImage($event)"></app-camera>
  </div>

  <!-- <div class="row mt-3">
    <div class="col-sm-12">
      <div id="image-preview"></div>
    </div>
  </div> -->

  <div class="row mt-3">
    <div class="col-sm-12 d-flex">
      <div class="form-group">
        <select class="form-select" id="example-select">
          <option>Passport</option>
          <option>Driver License</option>
          <option>ID</option>
        </select>
      </div>

      <a class="btn btn-primary ml-10">Save Image</a>

      <a data-bs-dismiss="modal" class="btn btn-primary ml-10">Close</a>
    </div>
  </div>
</p-dialog>
</ng-container>


<!-- <p-dialog [modal]="true" 
  header="New Regrade"
  [(visible)]="ivisible"
  [style]="{ width: '80vw' }"
>
  <ng-template pTemplate="header">
    <div class="d-flex">
        <a (click) ="hideItemViewModel()" class="btn btn-primary btn-back"
        ><i class="mdi mdi-keyboard-backspace"></i
      ></a>
  
      <h4 class="modal-title ml-10" id="myLargeModalLabel">View Item</h4>
    </div>
   
  </ng-template>

  <div class="row">
    <div class="col-sm-12">
      <table
        id="dt-certificates-view-item"
        class="table dt-responsive nowrap w-100"
      >
        <thead>
          <tr>
            <th>Material</th>
            <th>Gross Net</th>
            <th>Amount</th>
            <th></th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>Computer Memory</td>
            <td>222.00</td>
            <td>1485.000</td>
            <td>
              <img
                src="assets/images/custom/aluminium-extrusion.jpg"
                class="img-responsive certificates-img"
              />
            </td>
          </tr>

          <tr>
            <td>Computer Memory</td>
            <td>363.00</td>
            <td>985.000</td>
            <td>
              <img
                src="assets/images/custom/aluminium-extrusion.jpg"
                class="img-responsive certificates-img"
              />
            </td>
          </tr>

          <tr>
            <td>Copper #1</td>
            <td>252.00</td>
            <td>580.000</td>
            <td>
              <img
                src="assets/images/custom/aluminium-extrusion.jpg"
                class="img-responsive certificates-img"
              />
            </td>
          </tr>

          <tr>
            <td>Copper #2</td>
            <td>341.00</td>
            <td>951.000</td>
            <td>
              <img
                src="assets/images/custom/aluminium-extrusion.jpg"
                class="img-responsive certificates-img"
              />
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</p-dialog> -->
